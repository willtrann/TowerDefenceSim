<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Tower.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">scaffold</a> &gt; <a href="index.source.html" class="el_package">WizardTD</a> &gt; <span class="el_source">Tower.java</span></div><h1>Tower.java</h1><pre class="source lang-java linenums">package WizardTD;

import processing.core.PImage;
import java.io.*;
import java.util.*;
import java.lang.*;

/**
 * The type Tower.
 */
public class Tower {
    /**
     * The Coordinate.
     */
    protected Coordinate coordinate;
    /**
     * The Initial tower range.
     */
    protected int initial_tower_range;
    /**
     * The Initial tower firing speed.
     */
    protected double initial_tower_firing_speed;
    /**
     * The Initial tower damage.
     */
    protected double initial_tower_damage;
    /**
     * The Tower range.
     */
    protected int tower_range;
    /**
     * The Tower firing speed.
     */
    protected double tower_firing_speed;
    /**
     * The Tower damage.
     */
    protected double tower_damage;
    /**
     * The Target.
     */
<span class="fc" id="L43">    protected Monster target = null;</span>
    /**
     * The Fireball.
     */
<span class="fc" id="L47">    protected Fireball fireball = null;</span>
    /**
     * The Towerimgs.
     */
    protected List&lt;PImage&gt; towerimgs;
    /**
     * The Type.
     */
    protected PImage type;
    /**
     * The Damage level.
     */
<span class="fc" id="L59">    public int damage_level,</span>
    /**
     * The Speed level.
     */
    speed_level,
    /**
     * The Range level.
     */
    range_level = 0;
    /**
     * The Cost dmg.
     */
<span class="fc" id="L71">    public int cost_dmg = 10;</span>
    /**
     * The Cost speed.
     */
<span class="fc" id="L75">    public int cost_speed = 10;</span>
    /**
     * The Cost range.
     */
<span class="fc" id="L79">    public int cost_range = 10;</span>
    /**
     * The Fireball img.
     */
    protected PImage fireballImg;
    /**
     * The Tower frame count.
     */
<span class="fc" id="L87">    public int towerFrameCount = 0;</span>

    /**
     * Instantiates a new Tower.
     *
     * @param towerimgs                  the towerimgs
     * @param coordinate                 the coordinate
     * @param initial_tower_range        the initial tower range
     * @param initial_tower_firing_speed the initial tower firing speed
     * @param initial_tower_damage       the initial tower damage
     * @param fireballImg                the fireball img
     */
<span class="fc" id="L99">    public Tower(List&lt;PImage&gt; towerimgs, Coordinate coordinate, int initial_tower_range, double initial_tower_firing_speed, double initial_tower_damage, PImage fireballImg){</span>
<span class="fc" id="L100">        this.towerimgs = towerimgs;</span>
<span class="fc" id="L101">        this.coordinate = coordinate;</span>
<span class="fc" id="L102">        this.initial_tower_range = tower_range = initial_tower_range;</span>
<span class="fc" id="L103">        this.initial_tower_firing_speed = tower_firing_speed= initial_tower_firing_speed;</span>
<span class="fc" id="L104">        this.initial_tower_damage = tower_damage = initial_tower_damage;</span>
<span class="fc" id="L105">        this.type = towerimgs.get(0);</span>
<span class="fc" id="L106">        this.fireballImg = fireballImg;</span>
<span class="fc" id="L107">    }</span>

    /**
     * Get coordinate coordinate.
     *
     * @return the coordinate
     */
<span class="fc" id="L114">    public Coordinate getCoordinate(){ return this.coordinate; }</span>

    /**
     * Get tower range int.
     *
     * @return the int
     */
    public int getTower_range(){
<span class="fc" id="L122">        return tower_range;</span>
    }

    /**
     * Get tower damage double.
     *
     * @return the double
     */
    public double getTower_damage(){
<span class="fc" id="L131">        return tower_damage;</span>
    }

    /**
     * Get tower firing speed double.
     *
     * @return the double
     */
    public double getTower_firing_speed(){
<span class="fc" id="L140">        return tower_firing_speed;</span>
    }

    /**
     * Gets fireball.
     *
     * @return the fireball
     */
    public Fireball getFireball() {
<span class="fc" id="L149">        return fireball;</span>
    }

    /**
     * Get type p image.
     *
     * @return the p image
     */
    public PImage getType(){
<span class="fc" id="L158">        return this.type;</span>
    }

    /**
     * Upgrade damage.
     */
    public void upgradeDamage(){
<span class="fc" id="L165">        tower_damage += initial_tower_damage/2;</span>
<span class="fc" id="L166">        damage_level++;</span>
<span class="fc" id="L167">        cost_dmg += 10;</span>
<span class="fc" id="L168">    }</span>

    /**
     * Upgrade range.
     */
    public void upgradeRange(){
<span class="fc" id="L174">        tower_range++;</span>
<span class="fc" id="L175">        range_level++;</span>
<span class="fc" id="L176">        cost_range += 10;</span>
<span class="fc" id="L177">    }</span>

    /**
     * Upgrade speed.
     */
    public void upgradeSpeed(){
<span class="fc" id="L183">        tower_firing_speed += 0.5;</span>
<span class="fc" id="L184">        speed_level++;</span>
<span class="fc" id="L185">        cost_speed += 10;</span>
<span class="fc" id="L186">    }</span>

    /**
     * Tower image.
     */
    public void towerImage(){
<span class="pc bpc" id="L192" title="2 of 6 branches missed.">        if(damage_level == 1 &amp;&amp; range_level == 1 &amp;&amp; speed_level == 1){</span>
<span class="fc" id="L193">            type = towerimgs.get(1); // set tower image to level 1 everything</span>
        }
<span class="pc bpc" id="L195" title="1 of 6 branches missed.">        else if(damage_level &gt;= 2 &amp;&amp; range_level &gt;= 2 &amp;&amp; speed_level &gt;= 2){</span>
<span class="fc" id="L196">            type = towerimgs.get(2); // set tower image to level 2 everything</span>
        }
<span class="fc" id="L198">    }</span>

    /**
     * Within tower range boolean.
     *
     * @param distance the distance
     * @return the boolean
     */
    protected boolean withinTowerRange(double distance){
<span class="fc bfc" id="L207" title="All 2 branches covered.">        return distance &lt;= tower_range;</span>
    }

    /**
     * Shoot fireball.
     *
     * @param monsters the monsters
     * @return the fireball
     */
    public Fireball shootFireball(List&lt;Monster&gt; monsters) {
<span class="fc" id="L217">        double monsterDistance = 0.0;</span>

<span class="fc bfc" id="L219" title="All 2 branches covered.">        if (target != null) { //if target exists get distance to check</span>
<span class="fc" id="L220">            monsterDistance = distance(coordinate.x, target.getX_Pos(), coordinate.y, target.getY_Pos());</span>
        }

<span class="pc bpc" id="L223" title="1 of 6 branches missed.">        if (target != null &amp;&amp; ( !(withinTowerRange(monsterDistance)) || target.isDead())) {</span>
<span class="fc" id="L224">            target = null; // if target exists and is dead or out of tower's range, set back to null</span>
        }

<span class="fc bfc" id="L227" title="All 2 branches covered.">        if(target == null) {</span>
<span class="fc" id="L228">            double closestDistance = Double.MAX_VALUE;</span>
<span class="fc bfc" id="L229" title="All 2 branches covered.">            for (Monster monster : monsters) {</span>
<span class="fc" id="L230">                double x = coordinate.x;</span>
<span class="fc" id="L231">                double y = coordinate.y;</span>
<span class="fc" id="L232">                double distance = distance(x, monster.getX_Pos(), y, monster.getY_Pos());</span>
<span class="fc bfc" id="L233" title="All 4 branches covered.">                if ((distance &lt; closestDistance) &amp;&amp; withinTowerRange(distance)) {</span>
<span class="fc" id="L234">                    target = monster; // find closest target to tower's range to target</span>
<span class="fc" id="L235">                    closestDistance = distance;</span>
                }
<span class="fc" id="L237">            }</span>
        }

<span class="pc bpc" id="L240" title="1 of 4 branches missed.">        if (target != null &amp;&amp; fireball == null) {</span>
<span class="fc" id="L241">            return new Fireball(fireballImg, tower_damage, target, coordinate.x, coordinate.y, this); // if target is a monster and no fireball, make a new fireball</span>
        }
<span class="fc" id="L243">        return null;</span>
    }

    /**
     * Distance double.
     *
     * @param x1 the x 1
     * @param x2 the x 2
     * @param y1 the y 1
     * @param y2 the y 2
     * @return the double
     */
    protected double distance(double x1, double x2, double y1, double y2){
<span class="fc" id="L256">        return Math.sqrt(Math.pow((x2-x1),2) + Math.pow((y2-y1),2));</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.9.202303310957</span></div></body></html>